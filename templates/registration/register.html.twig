{% extends 'base.html.twig' %}

{% block html_class %}h-full bg-gray-100
{% endblock %}
{% block body_class %}h-full
{% endblock %}

{% block title %}Register
{% endblock %}

{% block body %}

	{% for flash_error in app.flashes('verify_email_error') %}
		<div class="alert alert-danger" role="alert">{{ flash_error }}</div>
	{% endfor %}

	<div class="flex min-h-full">
		<div class="flex flex-1 flex-col justify-center px-4 py-12 sm:px-6 lg:flex-none lg:px-20 xl:px-24">
			<div class="mx-auto w-full max-w-sm lg:w-96">
				<div>
					<img class="h-10 w-auto" src="{{ asset('images/logos/kibuzn_logo_150x42.png') }}" alt="Kibuzn">
				</div>

				<div class="mt-10">

					<h2 class="mt-8 text-2xl font-bold leading-9 tracking-tight text-gray-900">Register</h2>

					{{ form_start(registrationForm, { 'attr': { 'class': 'space-y-6' } }) }}

					<!-- firstname -->
					<div class="mt-2">
						{{ form_label(registrationForm.firstname, 'First name', { 'label_attr': { 'class': 'block text-sm font-medium leading-6 text-gray-900' } }) }}
						<div>
							{{ form_widget(registrationForm.firstname, { 'attr': { 'class': 'block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-violet-600 sm:text-sm sm:leading-6' } }) }}
						</div>
						{{ form_errors(registrationForm.firstname) }}
					</div>

					<!-- lastname -->
					<div>
						{{ form_label(registrationForm.lastname, 'Last name', { 'label_attr': { 'class': 'block text-sm font-medium leading-6 text-gray-900' } }) }}
						<div class="mt-2">
							{{ form_widget(registrationForm.lastname, { 'attr': { 'class': 'block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-violet-600 sm:text-sm sm:leading-6' } }) }}
						</div>
						{{ form_errors(registrationForm.lastname) }}
					</div>

					<!-- email -->
					<div>
						{{ form_label(registrationForm.email, 'Email address', { 'label_attr': { 'class': 'block text-sm font-medium leading-6 text-gray-900' } }) }}
						<div class="mt-2">
							{{ form_widget(registrationForm.email, { 'attr': { 'class': 'block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-violet-600 sm:text-sm sm:leading-6' } }) }}
						</div>
						{{ form_errors(registrationForm.email) }}
					</div>

					<!-- password -->
					<div>
						{{ form_label(registrationForm.plainPassword, 'Password', { 'label_attr': { 'class': 'block text-sm font-medium leading-6 text-gray-900' } }) }}
						<div class="mt-2">
							{{ form_widget(registrationForm.plainPassword, { 'attr': { 'class': 'block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-violet-600 sm:text-sm sm:leading-6' } }) }}
						</div>
						{{ form_errors(registrationForm.plainPassword) }}
					</div>

					<div>
						<div
							class="flex items-center gap-x-4">
							<!-- Avatar -->
							<div
								class="flex items-center" data-controller="image-input">
								<!-- Bind the Stimulus controller -->
								{{ form_label(registrationForm.avatar, 'Avatar', { 'label_attr': { 'class': 'block text-sm font-medium leading-6 text-gray-900' } }) }}
								<div
									class="ml-4">
									<!-- Specify this input as a target for the Stimulus controller -->
									{{ form_widget(registrationForm.avatar, { 'attr': { 
										'class': 'hidden',
										'data-image-input-target': 'imageInput',
										'accept': '.jpg, .jpeg, .png, .gif, .svg, .webp'
									} }) }}
									<!-- Specify this image as a target for the Stimulus controller -->
									<label for="registration_form_avatar" class="cursor-pointer">
										<img
										src="{{ asset('images/avatars/default.png') }}" alt="Avatar" class="h-12 w-12 rounded-full" data-image-input-target="imagePreview">
									<!-- Corrected this target name -->
									</label>
								</div>
								{{ form_errors(registrationForm.avatar) }}
							</div>
							<!-- Timezone -->
							<div
								class="flex-1" data-controller="register-timezone-input">
								<!-- Bind the Stimulus controller to this div -->
								{{ form_label(registrationForm.timezone, 'Timezone', { 'label_attr': { 'class': 'block text-sm font-medium leading-6 text-gray-900' } }) }}
								<div
									class="mt-2">
									<!-- Specify this input as a target for the Stimulus controller -->
									{{ form_widget(registrationForm.timezone, { 'attr': { 
                                        'class': 'block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-violet-600 sm:text-sm sm:leading-6',
                                        'data-register-timezone-input-target': 'timezoneInput' 
                                    } }) }}
								</div>
								{{ form_errors(registrationForm.timezone) }}
							</div>

						</div>
					</div>

					<div>
						<button type="submit" class="flex w-full justify-center rounded-md bg-violet-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-violet-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-violet-600">Register</button>
					</div>

					{{ form_end(registrationForm) }}
				</div>
				<p class="mt-10 text-center text-sm text-gray-500">
					Already have an account?
					<a href="{{ path('app_login')}}" class="font-semibold leading-6 text-violet-600 hover:text-violet-500">Login</a>
				</p>
			</div>
		</div>


		<div class="relative hidden w-0 flex-1 lg:block">
			<img class="absolute inset-0 h-full w-full object-cover" src="https://images.unsplash.com/photo-1476842321362-f5bb3a58ab25?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="">
		</div>
	</div>

{% endblock %}
